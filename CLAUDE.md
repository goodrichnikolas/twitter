# Twitter/X Early Response System

## Project Goal
Monitor specific Twitter/X accounts and get notified when they post something recent (under 10 minutes old), enabling quick responses to be one of the first to reply.

## System Architecture

### Components

1. **Post Monitor Service** (`post_monitor.py`)
   - Uses paid API service to fetch tweet data
   - Checks monitored accounts every 2 minutes (configurable)
   - Parses post timestamps from API response
   - Only notifies for posts under threshold (10 minutes by default)
   - No state tracking needed - timestamp-based approach
   - Error handling with automatic retry
   - Sends startup/shutdown notifications

2. **Notification System** (`notifier.py`)
   - Telegram bot integration for instant notifications
   - Async message sending with error handling
   - Post preview with URL and timestamp
   - Utility functions to get chat ID
   - Test mode for verification

3. **Data Storage**
   - `accounts.csv` - List of accounts to monitor (generated by account_scraper.py)
   - `config.json` - System configuration (Telegram, API, monitoring settings)

4. **Account Scraper** (`account_scraper.py`)
   - Parses saved HTML files from x_home/ folder
   - Extracts usernames using BeautifulSoup
   - Maintains accounts.csv with unique accounts
   - No browser automation - offline HTML parsing

## Implementation Details

### API Integration
- Uses paid API service for reliable access
- Fetches user timelines via API calls
- Parses JSON responses for tweet data
- Extracts timestamps and content
- No browser automation needed

### Monitoring Logic
- Makes API calls for each monitored account
- Fetches most recent tweets
- Parses timestamps from API response
- Only notifies if post is under threshold (default 10 minutes)
- No state tracking - timestamp comparison is stateless

### Timestamp Parsing
- Parses ISO 8601 timestamps from API
- Calculates time difference in minutes
- Converts to relative time for notifications
- Supports various timestamp formats

### Rate Limiting Strategy
- 2-minute intervals between check cycles (configurable)
- 1-second delay between individual account checks
- Respects API rate limits
- Graceful error handling for API errors

## Compliance & Safety

- ✅ Uses authorized API service
- ✅ Uses read-only operations (no automated posting)
- ✅ Respects rate limits with conservative timing
- ✅ User manually posts replies (not automated)
- ✅ Monitors public information only
- ✅ No browser automation or scraping

## Technical Stack

- Python 3.12+
- python-telegram-bot 20.0+ for notifications
- requests 2.31+ for HTTP/API calls
- BeautifulSoup4 4.12+ for HTML parsing (account scraper)
- CSV for account storage
- JSON for configuration

## Usage Flow

1. **Setup**
   - Create Telegram bot via @BotFather
   - Get API key from your chosen API service
   - Configure `config.json` with bot token, API key, and settings
   - Get chat ID using `notifier.py --get-chat-id`
   - Save X/Twitter HTML pages to `x_home/` folder
   - Run `account_scraper.py` to generate `accounts.csv`

2. **Monitor**
   - Run `post_monitor.py`
   - Script makes API calls for each account
   - Checks all accounts every 2 minutes
   - Receive Telegram notifications for recent posts only
   - Manually reply to posts

3. **Stop**
   - Ctrl+C to stop monitor
   - No state to save (stateless design)
   - Resume anytime

## Configuration

```json
{
  "telegram": {
    "bot_token": "...",
    "chat_id": "..."
  },
  "api": {
    "key": "your-api-key-here"
  },
  "monitoring": {
    "check_interval_seconds": 120,
    "recent_post_minutes": 10
  }
}
```

### `accounts.csv` Format
```csv
# Accounts extracted from X/Twitter HTML pages
# Updated automatically by account_scraper.py
username
vickyjadex
elonmusk
OpenAI
```

## Advantages of API Approach

✅ **No Browser Automation** - Uses official API, no detection issues
✅ **More Reliable** - Professional API service with uptime guarantees
✅ **Faster** - API calls are quicker than browser navigation
✅ **Smarter Notifications** - Only alerts for recent posts (< 10 min)
✅ **No State Management** - Timestamp-based, no state files
✅ **No Login Issues** - API handles authentication
✅ **Scalable** - Can monitor many accounts efficiently

## Future Enhancements

- [ ] Advanced filtering (keywords, post types, media)
- [ ] Priority accounts with different thresholds
- [ ] Historical post timing analysis
- [ ] Performance optimization (parallel checks)
- [ ] Web dashboard for monitoring
- [ ] Multiple notification channels (Discord, SMS)
- [ ] Support for Twitter Lists
- [ ] Post engagement metrics tracking
- [ ] Dynamic threshold adjustment based on account activity
